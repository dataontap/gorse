
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GORSE Platform Documentation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .docs-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        .docs-nav {
            position: sticky;
            top: 20px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .docs-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .docs-nav li {
            margin: 8px 0;
        }
        .docs-nav a {
            color: #0066ff;
            text-decoration: none;
            font-weight: 500;
        }
        .docs-nav a:hover {
            text-decoration: underline;
        }
        .docs-section {
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .docs-section h2 {
            color: #0066ff;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        .docs-section h3 {
            color: #495057;
            margin-top: 25px;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .endpoint {
            background: #e7f3ff;
            border-left: 4px solid #0066ff;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 0 4px 4px 0;
        }
        .endpoint-method {
            font-weight: bold;
            color: #0066ff;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        .api-example {
            background: #1a1a1a;
            color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .back-to-app {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #0066ff;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            z-index: 1000;
        }
        .back-to-app:hover {
            background: #0052cc;
        }
    </style>
</head>
<body>
    <a href="/dashboard" class="back-to-app">‚Üê Back to App</a>
    
    <div class="docs-container">
        <header>
            <h1>üåê GORSE Platform Documentation</h1>
            <p>Global Connectivity Service and Network API Access</p>
        </header>

        <nav class="docs-nav">
            <h3>Quick Navigation</h3>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#authentication">Authentication</a></li>
                <li><a href="#api-endpoints">API Endpoints</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#integration">Integration Guide</a></li>
                <li><a href="#examples">Code Examples</a></li>
                <li><a href="#support">Support</a></li>
            </ul>
        </nav>

        <section id="overview" class="docs-section">
            <h2>üåü Platform Overview</h2>
            <p>GORSE (Global Optimized Roaming Service Engine) is a comprehensive platform providing global data connectivity, eSIM management, and network services. Built on a modern Flask-based architecture with Firebase authentication and Stripe payments.</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üåç Global Connectivity</h4>
                    <p>160+ countries coverage with instant eSIM activation</p>
                </div>
                <div class="feature-card">
                    <h4>üì± eSIM Technology</h4>
                    <p>OXIO-powered embedded SIM cards for seamless connectivity</p>
                </div>
                <div class="feature-card">
                    <h4>üè¢ Enterprise Ready</h4>
                    <p>Canadian MVNO (Network 302 100) with enterprise features</p>
                </div>
                <div class="feature-card">
                    <h4>üîó API First</h4>
                    <p>RESTful APIs with comprehensive documentation</p>
                </div>
            </div>
        </section>

        <section id="authentication" class="docs-section">
            <h2>üîê Authentication</h2>
            <h3>Firebase Authentication</h3>
            <p>GORSE uses Firebase Authentication for secure user management. All API requests require a valid Firebase UID.</p>
            
            <div class="code-block">
<pre>// Initialize Firebase Authentication
const auth = firebase.auth();

// Sign in with email/password
auth.signInWithEmailAndPassword(email, password)
    .then(userCredential => {
        const firebaseUid = userCredential.user.uid;
        // Use firebaseUid for API calls
    });
</pre>
            </div>

            <h3>API Key Authentication</h3>
            <p>For server-to-server communication, use API keys in the Authorization header:</p>
            
            <div class="endpoint">
                <span class="endpoint-method">Header:</span> Authorization: Bearer YOUR_API_KEY
            </div>
        </section>

        <section id="api-endpoints" class="docs-section">
            <h2>üöÄ API Endpoints</h2>
            
            <h3>User Management</h3>
            <div class="endpoint">
                <span class="endpoint-method">POST</span> /api/auth/register<br>
                Register a new Firebase user in the database
            </div>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/auth/current-user?firebaseUid={uid}<br>
                Get current user data including founder status and balances
            </div>
            
            <h3>Data & Subscriptions</h3>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/user/data-balance?firebaseUid={uid}<br>
                Get user's current data balance in GB
            </div>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/subscription-status?firebaseUid={uid}<br>
                Get active subscription status and details
            </div>
            <div class="endpoint">
                <span class="endpoint-method">POST</span> /api/record-global-purchase<br>
                Record a marketplace purchase (data, memberships)
            </div>

            <h3>OXIO Integration</h3>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/oxio/test-connection<br>
                Test OXIO API connectivity and credentials
            </div>
            <div class="endpoint">
                <span class="endpoint-method">POST</span> /api/oxio/activate-line<br>
                Activate an eSIM line through OXIO
            </div>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/oxio-user-data?firebaseUid={uid}<br>
                Get user's OXIO profile and line information
            </div>

            <h3>Network Features</h3>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/network-features/{firebaseUid}<br>
                Get available network features and their status
            </div>
            <div class="endpoint">
                <span class="endpoint-method">PUT</span> /api/network-features/{firebaseUid}/{productId}<br>
                Toggle network feature on/off
            </div>

            <h3>Token Operations</h3>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/token/price<br>
                Get current DOTM token price
            </div>
            <div class="endpoint">
                <span class="endpoint-method">GET</span> /api/token/balance/{address}<br>
                Get token balance for Ethereum address
            </div>
            <div class="endpoint">
                <span class="endpoint-method">POST</span> /api/token/founding-token<br>
                Assign founding member tokens (100 DOTM)
            </div>
        </section>

        <section id="features" class="docs-section">
            <h2>‚ú® Platform Features</h2>
            
            <h3>Global Data Connectivity</h3>
            <ul>
                <li>160+ countries coverage</li>
                <li>Instant eSIM activation</li>
                <li>Flexible data plans (10GB, Basic, Full memberships)</li>
                <li>Real-time usage tracking</li>
            </ul>

            <h3>Enterprise Network Services</h3>
            <ul>
                <li>Canadian MVNO (Network 302 100)</li>
                <li>Network security features</li>
                <li>Performance optimization</li>
                <li>Real-time monitoring</li>
            </ul>

            <h3>Cryptocurrency Integration</h3>
            <ul>
                <li>DOTM utility token on Ethereum</li>
                <li>Token rewards for purchases (10.33%)</li>
                <li>Founding member benefits</li>
                <li>Ethereum wallet integration</li>
            </ul>

            <h3>Payment Processing</h3>
            <ul>
                <li>Stripe integration for cards</li>
                <li>Subscription management</li>
                <li>Invoice generation</li>
                <li>Usage-based billing</li>
            </ul>
        </section>

        <section id="integration" class="docs-section">
            <h2>üîß Integration Guide</h2>
            
            <h3>Quick Start</h3>
            <div class="code-block">
<pre>1. Set up Firebase project with Authentication
2. Configure environment variables:
   - FIREBASE_ADMIN_KEY
   - STRIPE_SECRET_KEY
   - OXIO_API_KEY
   - DATABASE_URL
3. Initialize user with /api/auth/register
4. Start making API calls with firebaseUid
</pre>
            </div>

            <h3>Environment Setup</h3>
            <div class="api-example">
<pre>export FIREBASE_ADMIN_KEY="your_firebase_key"
export STRIPE_SECRET_KEY="sk_test_..."
export OXIO_API_KEY="your_oxio_key"
export OXIO_AUTH_TOKEN="your_oxio_token"
export DATABASE_URL="postgresql://..."
</pre>
            </div>
        </section>

        <section id="examples" class="docs-section">
            <h2>üí° Code Examples</h2>
            
            <h3>Register New User</h3>
            <div class="api-example">
<pre>// JavaScript
const response = await fetch('/api/auth/register', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        firebaseUid: 'user_firebase_uid',
        email: 'user@example.com',
        displayName: 'John Doe'
    })
});
const result = await response.json();
console.log('User registered:', result);
</pre>
            </div>

            <h3>Purchase Data Plan</h3>
            <div class="api-example">
<pre>// Purchase 10GB Global Data
const purchase = await fetch('/api/record-global-purchase', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        productId: 'global_data_10gb',
        firebaseUid: 'user_firebase_uid'
    })
});
const purchaseResult = await purchase.json();
</pre>
            </div>

            <h3>Check Data Balance</h3>
            <div class="api-example">
<pre>// Get user's data balance
const balance = await fetch(`/api/user/data-balance?firebaseUid=${firebaseUid}`);
const balanceData = await balance.json();
console.log(`Data balance: ${balanceData.dataBalance} GB`);
</pre>
            </div>

            <h3>Activate eSIM</h3>
            <div class="api-example">
<pre>// Activate eSIM through OXIO
const activation = await fetch('/api/oxio/activate-line', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        lineType: "LINE_TYPE_MOBILITY",
        sim: {
            simType: "EMBEDDED",
            iccid: "8910650420001501340F"
        },
        endUser: {
            brandId: "91f70e2e-d7a8-4e9c-afc6-30acc019ed67",
            email: "user@example.com"
        },
        countryCode: "US"
    })
});
</pre>
            </div>
        </section>

        <section id="support" class="docs-section">
            <h2>üÜò Support & Resources</h2>
            
            <h3>API Documentation</h3>
            <p>Interactive Swagger documentation available at: <a href="/api" target="_blank">/api</a></p>
            
            <h3>Status Pages</h3>
            <ul>
                <li><a href="/db-test">Database Connection Test</a></li>
                <li><a href="/api/oxio/test-connection">OXIO Service Status</a></li>
                <li><a href="/token-price-pings">Token Price History</a></li>
            </ul>

            <h3>Help & Contact</h3>
            <ul>
                <li><a href="/help-admin">Help Desk</a></li>
                <li><a href="/message-admin">Contact Admin</a></li>
                <li>Email: support@dotmobile.app</li>
            </ul>

            <h3>Legal</h3>
            <ul>
                <li><a href="/terms">Terms of Service</a></li>
                <li><a href="/privacy">Privacy Policy</a></li>
                <li><a href="/about">About GORSE</a></li>
            </ul>
        </section>
    </div>
</body>
</html>
